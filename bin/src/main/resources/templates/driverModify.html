<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Taeum</title>
<script src="js/jquery-3.7.1.min.js"></script>
<link rel="stylesheet" href="css/style.css">
<script th:inline="javascript">
	$(function() {
		let m = /*[[${msg}]]*/null;
		if (m != null) {
			alert(m);
		}
	});
</script>
<th:block th:insert="~{fragments :: header}" />
</head>
<body>
	<section>
		<div class="box-layout">
			<fieldset class="profile">
				<div class="driverInfo">
					<p>
					<div class="driver-image">
						<img th:src="@{/upload/}+${driverImage}" alt="프로필 이미지"
							width="300px" height="300px">
					</div>
					</p>
					<span th:text="${driver.M_NAME}"></span> <br> <span
						th:text="${driver.M_PHONE}"></span> <br> <span
						th:text="${driver.DR_CARNUM}"></span>
				</div>
				<br> <input class="btn-traffic btn-write-btn" type="button"
					id="moveToModify" value="정보 수정">
			</fieldset>
			<fieldset class="raceInfo">
				<div class="traffic-area">
					<p>
						<span class="span-1" th:text="${todayTraffic}"></span> <br> <br>
						오늘 운행
					</p>

					<p>
						<span class="span-1" th:text="${monthTraffic}"></span> <br> <br>
						이번 달 운행
					</p>

					<p>
						<span class="span-1" th:text="${totalTraffic}"></span> <br> <br>
						총 운행
					</p>
				</div>
				<div class="btn-area modify">
					<input class="btn-traffic btn-move-btn" type="button"
						id="management" th:onclick="changeButton()" value="출근"> <input
						class="btn-traffic btn-move-btn" type="button"
						id="moveTomainCenter" value="운행 정보">
				</div>
			</fieldset>
		</div>
	</section>
	<th:block th:insert="~{fragments::footer}" />
</body>
<script th:inline="javascript">
	// 파일 제목 처리
	$("#file").on("change", function() {
		let files = $("#file")[0].files;
		console.log(files);

		let fileName = ""; // 출력할 문장 저장 변수

		if (files.length > 1) {
			fileName = `${files[0].name} 외 ${files.length - 1}개`;
		} else if (files.length === 1) {
			fileName = files[0].name;
		} else {
			fileName = "파일선택";
		}
		$(".upload-name").val(fileName);
	});

	$("#moveTomainCenter").click(function() {
		location.href = `/mainCenter`;
	});

	$("#moveToModify").click(function() {
		location.href = `/driverUpdate`;
	});

	function changeButton() {
		const btn = document.getElementById('management');

		if (btn.value === "출근") {
			btn.value = "퇴근";
		} else if (btn.value === "퇴근") {
			btn.value = "출근";
		}
	}
</script>
</html>
